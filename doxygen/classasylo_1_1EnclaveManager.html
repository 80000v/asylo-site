<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asylo: asylo::EnclaveManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="/favicons/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asylo
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceasylo.html">asylo</a></li><li class="navelem"><a class="el" href="classasylo_1_1EnclaveManager.html">EnclaveManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classasylo_1_1EnclaveManager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">asylo::EnclaveManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A manager object responsible for creating and managing enclave instances.  
 <a href="classasylo_1_1EnclaveManager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="enclave__manager_8h_source.html">enclave_manager.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afc224568d4da53b0ec687d043854545f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classasylo_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasylo_1_1EnclaveManager.html#afc224568d4da53b0ec687d043854545f">LoadEnclave</a> (const std::string &amp;name, const <a class="el" href="classasylo_1_1EnclaveLoader.html">EnclaveLoader</a> &amp;loader, void *base_address=nullptr, const size_t enclave_size=0)</td></tr>
<tr class="memdesc:afc224568d4da53b0ec687d043854545f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads an enclave.  <a href="#afc224568d4da53b0ec687d043854545f">More...</a><br /></td></tr>
<tr class="separator:afc224568d4da53b0ec687d043854545f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0852583072930a4f5f165eca530d3e29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classasylo_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasylo_1_1EnclaveManager.html#a0852583072930a4f5f165eca530d3e29">LoadEnclave</a> (const std::string &amp;name, const <a class="el" href="classasylo_1_1EnclaveLoader.html">EnclaveLoader</a> &amp;loader, EnclaveConfig config, void *base_address=nullptr, const size_t enclave_size=0)</td></tr>
<tr class="memdesc:a0852583072930a4f5f165eca530d3e29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads an enclave.  <a href="#a0852583072930a4f5f165eca530d3e29">More...</a><br /></td></tr>
<tr class="separator:a0852583072930a4f5f165eca530d3e29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49d6c42ba34a032209665280461f0940"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasylo_1_1EnclaveManager.html#a49d6c42ba34a032209665280461f0940">GetClient</a> (const std::string &amp;name) const LOCKS_EXCLUDED(client_table_lock_)</td></tr>
<tr class="memdesc:a49d6c42ba34a032209665280461f0940"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches a client to a loaded enclave.  <a href="#a49d6c42ba34a032209665280461f0940">More...</a><br /></td></tr>
<tr class="separator:a49d6c42ba34a032209665280461f0940"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a957d70baf503712bb8bcfc82c86d2017"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasylo_1_1EnclaveManager.html#a957d70baf503712bb8bcfc82c86d2017">GetName</a> (const <a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a> *client) const LOCKS_EXCLUDED(client_table_lock_)</td></tr>
<tr class="memdesc:a957d70baf503712bb8bcfc82c86d2017"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the name of an enclave client.  <a href="#a957d70baf503712bb8bcfc82c86d2017">More...</a><br /></td></tr>
<tr class="separator:a957d70baf503712bb8bcfc82c86d2017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afce9df15f32a024de63fa19f4e11ee0d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classasylo_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasylo_1_1EnclaveManager.html#afce9df15f32a024de63fa19f4e11ee0d">DestroyEnclave</a> (<a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a> *client, const EnclaveFinal &amp;final_input, bool skip_finalize=false) LOCKS_EXCLUDED(client_table_lock_)</td></tr>
<tr class="memdesc:afce9df15f32a024de63fa19f4e11ee0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys an enclave.  <a href="#afce9df15f32a024de63fa19f4e11ee0d">More...</a><br /></td></tr>
<tr class="separator:afce9df15f32a024de63fa19f4e11ee0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72d4da9f4f169905da2814cf866a480b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classasylo_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasylo_1_1EnclaveManager.html#a72d4da9f4f169905da2814cf866a480b">EnterAndTakeSnapshot</a> (<a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a> *client, SnapshotLayout *snapshot_layout)</td></tr>
<tr class="memdesc:a72d4da9f4f169905da2814cf866a480b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enters an enclave and takes a snapshot of its memory.  <a href="#a72d4da9f4f169905da2814cf866a480b">More...</a><br /></td></tr>
<tr class="separator:a72d4da9f4f169905da2814cf866a480b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c94f45f26570d0044b07987637b1692"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classasylo_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasylo_1_1EnclaveManager.html#a2c94f45f26570d0044b07987637b1692">EnterAndRestore</a> (<a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a> *client, const SnapshotLayout &amp;snapshot_layout)</td></tr>
<tr class="memdesc:a2c94f45f26570d0044b07987637b1692"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enters an enclave and restores it from an untrusted snapshot.  <a href="#a2c94f45f26570d0044b07987637b1692">More...</a><br /></td></tr>
<tr class="separator:a2c94f45f26570d0044b07987637b1692"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06f1321a39cd193079cf65bc0f2fe232"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classasylo_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasylo_1_1EnclaveManager.html#a06f1321a39cd193079cf65bc0f2fe232">EnterAndTransferSecureSnapshotKey</a> (<a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a> *client, const ForkHandshakeConfig &amp;fork_handshake_config)</td></tr>
<tr class="memdesc:a06f1321a39cd193079cf65bc0f2fe232"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enters an enclave and securely transfers snapshot key with another enclave.  <a href="#a06f1321a39cd193079cf65bc0f2fe232">More...</a><br /></td></tr>
<tr class="separator:a06f1321a39cd193079cf65bc0f2fe232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0562377d34c3c7b878c1371972330c67"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classasylo_1_1SharedResourceManager.html">SharedResourceManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasylo_1_1EnclaveManager.html#a0562377d34c3c7b878c1371972330c67">shared_resources</a> ()</td></tr>
<tr class="memdesc:a0562377d34c3c7b878c1371972330c67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the shared resource manager object.  <a href="#a0562377d34c3c7b878c1371972330c67">More...</a><br /></td></tr>
<tr class="separator:a0562377d34c3c7b878c1371972330c67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4122d89326019006fa949811c7be172"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classasylo_1_1SharedResourceManager.html">SharedResourceManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasylo_1_1EnclaveManager.html#ab4122d89326019006fa949811c7be172">shared_resources</a> () const</td></tr>
<tr class="memdesc:ab4122d89326019006fa949811c7be172"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the shared resource manager object.  <a href="#ab4122d89326019006fa949811c7be172">More...</a><br /></td></tr>
<tr class="separator:ab4122d89326019006fa949811c7be172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9b23f27641b2b7fd2ab8e167a5a3dad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classasylo_1_1EnclaveLoader.html">EnclaveLoader</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasylo_1_1EnclaveManager.html#ae9b23f27641b2b7fd2ab8e167a5a3dad">GetLoaderFromClient</a> (<a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a> *client) LOCKS_EXCLUDED(client_table_lock_)</td></tr>
<tr class="memdesc:ae9b23f27641b2b7fd2ab8e167a5a3dad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the loader of an enclave.  <a href="#ae9b23f27641b2b7fd2ab8e167a5a3dad">More...</a><br /></td></tr>
<tr class="separator:ae9b23f27641b2b7fd2ab8e167a5a3dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a1ab1d6d8d1043a53cab1e99c82c5f1a3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classasylo_1_1StatusOr.html">StatusOr</a>&lt; <a class="el" href="classasylo_1_1EnclaveManager.html">EnclaveManager</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasylo_1_1EnclaveManager.html#a1ab1d6d8d1043a53cab1e99c82c5f1a3">Instance</a> ()</td></tr>
<tr class="memdesc:a1ab1d6d8d1043a53cab1e99c82c5f1a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the <a class="el" href="classasylo_1_1EnclaveManager.html" title="A manager object responsible for creating and managing enclave instances. ">EnclaveManager</a> singleton instance.  <a href="#a1ab1d6d8d1043a53cab1e99c82c5f1a3">More...</a><br /></td></tr>
<tr class="separator:a1ab1d6d8d1043a53cab1e99c82c5f1a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ef64308157a4609fd8c84034e801902"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classasylo_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classasylo_1_1EnclaveManager.html#a9ef64308157a4609fd8c84034e801902">Configure</a> (const <a class="el" href="classasylo_1_1EnclaveManagerOptions.html">EnclaveManagerOptions</a> &amp;options)</td></tr>
<tr class="memdesc:a9ef64308157a4609fd8c84034e801902"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the enclave manager.  <a href="#a9ef64308157a4609fd8c84034e801902">More...</a><br /></td></tr>
<tr class="separator:a9ef64308157a4609fd8c84034e801902"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A manager object responsible for creating and managing enclave instances. </p>
<p><a class="el" href="classasylo_1_1EnclaveManager.html" title="A manager object responsible for creating and managing enclave instances. ">EnclaveManager</a> is a singleton class that tracks the status of enclaves within a process. Users of this class first supply a configuration using the static <a class="el" href="classasylo_1_1EnclaveManager.html#a9ef64308157a4609fd8c84034e801902" title="Configures the enclave manager. ">Configure()</a> method, and then get a pointer to the singleton instance as specified by this configuration by calling the static <a class="el" href="classasylo_1_1EnclaveManager.html#a1ab1d6d8d1043a53cab1e99c82c5f1a3" title="Fetches the EnclaveManager singleton instance. ">Instance()</a> method. Note that the <a class="el" href="classasylo_1_1EnclaveManager.html" title="A manager object responsible for creating and managing enclave instances. ">EnclaveManager</a> class must be configured before the instance pointer can be obtained.</p>
<p>The <a class="el" href="classasylo_1_1EnclaveManager.html#a9ef64308157a4609fd8c84034e801902" title="Configures the enclave manager. ">EnclaveManager::Configure()</a> method takes an instance of the <a class="el" href="classasylo_1_1EnclaveManagerOptions.html" title="Enclave Manager configuration. ">EnclaveManagerOptions</a> as its only input. This instance can be configured by calling its public setter methods. Note that these setter methods return an instance of the EnclaveManagerOptions() by reference so that the various setters could be chained together.</p>
<p>Example Usage: </p><div class="fragment"><div class="line"><a class="code" href="classasylo_1_1EnclaveManager.html#a9ef64308157a4609fd8c84034e801902">EnclaveManager::Configure</a>(</div><div class="line">  EnclaveManagerOptions()</div><div class="line">      .set_config_server_connection_attributes(</div><div class="line">          <span class="stringliteral">&quot;[::]:8000&quot;</span>,</div><div class="line">          absl::Milliseconds(100)));</div><div class="line"><span class="keyword">auto</span> manager_result = <a class="code" href="classasylo_1_1EnclaveManager.html#a1ab1d6d8d1043a53cab1e99c82c5f1a3">EnclaveManager::Instance</a>();</div><div class="line"><span class="keywordflow">if</span> (!manager_result.ok()) {</div><div class="line">  <a class="code" href="logging_8h.html#accad43a85d781d53381cd53a9894b6ae">LOG</a>(QFATAL) &lt;&lt; manager_result.status();</div><div class="line">}</div><div class="line">EnclaveManager *manager = manager_result.ValueOrDie();</div><div class="line">...</div></div><!-- fragment --><p>One of the responsibilities of the <a class="el" href="classasylo_1_1EnclaveManager.html" title="A manager object responsible for creating and managing enclave instances. ">EnclaveManager</a> class is to provide sane initial configuration to the enclaves it launches. The contents of the <a class="el" href="classasylo_1_1EnclaveManagerOptions.html" title="Enclave Manager configuration. ">EnclaveManagerOptions</a> instance control how the default values for the configuration are chosen. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a9ef64308157a4609fd8c84034e801902"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ef64308157a4609fd8c84034e801902">&#9670;&nbsp;</a></span>Configure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classasylo_1_1Status.html">Status</a> asylo::EnclaveManager::Configure </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classasylo_1_1EnclaveManagerOptions.html">EnclaveManagerOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Configures the enclave manager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>Configuration options as described in <a class="el" href="classasylo_1_1EnclaveManagerOptions.html" title="Enclave Manager configuration. ">EnclaveManagerOptions</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afce9df15f32a024de63fa19f4e11ee0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afce9df15f32a024de63fa19f4e11ee0d">&#9670;&nbsp;</a></span>DestroyEnclave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classasylo_1_1Status.html">Status</a> asylo::EnclaveManager::DestroyEnclave </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const EnclaveFinal &amp;&#160;</td>
          <td class="paramname"><em>final_input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>skip_finalize</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys an enclave. </p>
<p>Destroys an enclave. This method calls <code>client's</code> EnterAndFinalize entry point with final_input unless <code>skip_finalize</code> is true, then calls <code>client's</code> DestroyEnclave method, and then removes client's name from the <a class="el" href="classasylo_1_1EnclaveManager.html" title="A manager object responsible for creating and managing enclave instances. ">EnclaveManager</a> client registry. The manager owns the client, so removing it calls client's destructor and frees its memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>A client attached to the enclave to destroy. </td></tr>
    <tr><td class="paramname">final_input</td><td>Input to pass the enclave's finalizer. </td></tr>
    <tr><td class="paramname">skip_finalize</td><td>If true, the enclave is destroyed without invoking its Finalize method. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2c94f45f26570d0044b07987637b1692"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c94f45f26570d0044b07987637b1692">&#9670;&nbsp;</a></span>EnterAndRestore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classasylo_1_1Status.html">Status</a> asylo::EnclaveManager::EnterAndRestore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SnapshotLayout &amp;&#160;</td>
          <td class="paramname"><em>snapshot_layout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enters an enclave and restores it from an untrusted snapshot. </p>
<p>This method calls <code>client's</code> EnterAndRestore entry point, with snapshot layout (in untrusted memory) passed in |snapshot_layout|.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>A client attached to the enclave to enter. </td></tr>
    <tr><td class="paramname">snapshot_layout</td><td>The snapshot layout in untrusted memory used to restore enclave states. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a72d4da9f4f169905da2814cf866a480b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72d4da9f4f169905da2814cf866a480b">&#9670;&nbsp;</a></span>EnterAndTakeSnapshot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classasylo_1_1Status.html">Status</a> asylo::EnclaveManager::EnterAndTakeSnapshot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SnapshotLayout *&#160;</td>
          <td class="paramname"><em>snapshot_layout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enters an enclave and takes a snapshot of its memory. </p>
<p>This method calls <code>client's</code> EnterAndTakeSnapshot entry point, with snapshot layout (in untrusted memory) stored in |snapshot_layout|.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>A client attached to the enclave to enter. </td></tr>
    <tr><td class="paramname">snapshot_layout</td><td>The snapshot layout in untrusted memory to be filled up by snapshotting. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a06f1321a39cd193079cf65bc0f2fe232"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06f1321a39cd193079cf65bc0f2fe232">&#9670;&nbsp;</a></span>EnterAndTransferSecureSnapshotKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classasylo_1_1Status.html">Status</a> asylo::EnclaveManager::EnterAndTransferSecureSnapshotKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ForkHandshakeConfig &amp;&#160;</td>
          <td class="paramname"><em>fork_handshake_config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enters an enclave and securely transfers snapshot key with another enclave. </p>
<p>This method calls <code>client's</code> EnterAndTransferSecureSnapshotKey entry_point.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>A client attached to the enclave to enter. </td></tr>
    <tr><td class="paramname">fork_handshake_config</td><td>The input specifies the socket and type of enclave(parent/child). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a49d6c42ba34a032209665280461f0940"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49d6c42ba34a032209665280461f0940">&#9670;&nbsp;</a></span>GetClient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a>* asylo::EnclaveManager::GetClient </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches a client to a loaded enclave. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of an <a class="el" href="classasylo_1_1EnclaveClient.html" title="An abstract enclave client. ">EnclaveClient</a> that may be registered in the <a class="el" href="classasylo_1_1EnclaveManager.html" title="A manager object responsible for creating and managing enclave instances. ">EnclaveManager</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A mutable pointer to the <a class="el" href="classasylo_1_1EnclaveClient.html" title="An abstract enclave client. ">EnclaveClient</a> if the name is registered. Otherwise returns nullptr. </dd></dl>

</div>
</div>
<a id="ae9b23f27641b2b7fd2ab8e167a5a3dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9b23f27641b2b7fd2ab8e167a5a3dad">&#9670;&nbsp;</a></span>GetLoaderFromClient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classasylo_1_1EnclaveLoader.html">EnclaveLoader</a>* asylo::EnclaveManager::GetLoaderFromClient </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the loader of an enclave. </p>
<p>This should only be used during fork in order to load an enclave with the same loader as the parent. </p>

</div>
</div>
<a id="a957d70baf503712bb8bcfc82c86d2017"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a957d70baf503712bb8bcfc82c86d2017">&#9670;&nbsp;</a></span>GetName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string asylo::EnclaveManager::GetName </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classasylo_1_1EnclaveClient.html">EnclaveClient</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the name of an enclave client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>A pointer to a client that may be registered in the <a class="el" href="classasylo_1_1EnclaveManager.html" title="A manager object responsible for creating and managing enclave instances. ">EnclaveManager</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The name of an enclave client. If no enclave matches <code>client</code> the empty string will be returned. </dd></dl>

</div>
</div>
<a id="a1ab1d6d8d1043a53cab1e99c82c5f1a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ab1d6d8d1043a53cab1e99c82c5f1a3">&#9670;&nbsp;</a></span>Instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classasylo_1_1StatusOr.html">StatusOr</a>&lt;<a class="el" href="classasylo_1_1EnclaveManager.html">EnclaveManager</a> *&gt; asylo::EnclaveManager::Instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetches the <a class="el" href="classasylo_1_1EnclaveManager.html" title="A manager object responsible for creating and managing enclave instances. ">EnclaveManager</a> singleton instance. </p>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="classasylo_1_1StatusOr.html" title="A class for representing either a usable value, or an error. ">StatusOr</a> containing either the global <a class="el" href="classasylo_1_1EnclaveManager.html" title="A manager object responsible for creating and managing enclave instances. ">EnclaveManager</a> instance or an error describing why it could not be returned. </dd></dl>

</div>
</div>
<a id="afc224568d4da53b0ec687d043854545f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc224568d4da53b0ec687d043854545f">&#9670;&nbsp;</a></span>LoadEnclave() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classasylo_1_1Status.html">Status</a> asylo::EnclaveManager::LoadEnclave </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classasylo_1_1EnclaveLoader.html">EnclaveLoader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>base_address</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>enclave_size</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads an enclave. </p>
<p>Loads a new enclave with default enclave config settings and binds it to a name. The actual work of opening the enclave is delegated to the passed loader object.</p>
<p>It is an error to specify a name which is already bound to an enclave.</p>
<p>Example: </p><div class="fragment"><div class="line"><a class="code" href="classasylo_1_1EnclaveManager.html#afc224568d4da53b0ec687d043854545f">LoadEnclave</a>(<span class="stringliteral">&quot;/EchoEnclave&quot;</span>, SgxLoader(<span class="stringliteral">&quot;echoService.so&quot;</span>));</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Name to bind the loaded enclave under. </td></tr>
    <tr><td class="paramname">loader</td><td>Configured enclave loader to load from. </td></tr>
    <tr><td class="paramname">base_address</td><td>Start address to load enclave(optional). </td></tr>
    <tr><td class="paramname">enclave_size</td><td>The size of the enclave in memory(only needed if |base_address| is specified). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0852583072930a4f5f165eca530d3e29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0852583072930a4f5f165eca530d3e29">&#9670;&nbsp;</a></span>LoadEnclave() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classasylo_1_1Status.html">Status</a> asylo::EnclaveManager::LoadEnclave </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classasylo_1_1EnclaveLoader.html">EnclaveLoader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EnclaveConfig&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>base_address</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>enclave_size</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads an enclave. </p>
<p>Loads a new enclave with custom enclave config settings and binds it to a name. The actual work of opening the enclave is delegated to the passed loader object.</p>
<p>It is an error to specify a name which is already bound to an enclave.</p>
<p>Example:</p>
<div class="fragment"><div class="line">EnclaveConfig config;</div><div class="line">... <span class="comment">// populate config proto.</span></div><div class="line"><a class="code" href="classasylo_1_1EnclaveManager.html#afc224568d4da53b0ec687d043854545f">LoadEnclave</a>(<span class="stringliteral">&quot;/EchoEnclave&quot;</span>, SgxLoader(<span class="stringliteral">&quot;echoService.so&quot;</span>), config);</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Name to bind the loaded enclave under. </td></tr>
    <tr><td class="paramname">loader</td><td>Configured enclave loader to load from. </td></tr>
    <tr><td class="paramname">config</td><td>Enclave configuration to launch the enclave with. </td></tr>
    <tr><td class="paramname">base_address</td><td>Start address to load enclave(optional). </td></tr>
    <tr><td class="paramname">enclave_size</td><td>The size of the enclave in memory(only needed if |base_address| is specified). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0562377d34c3c7b878c1371972330c67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0562377d34c3c7b878c1371972330c67">&#9670;&nbsp;</a></span>shared_resources() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classasylo_1_1SharedResourceManager.html">SharedResourceManager</a>* asylo::EnclaveManager::shared_resources </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetches the shared resource manager object. </p>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="classasylo_1_1SharedResourceManager.html" title="A manager object for shared resources. ">SharedResourceManager</a> instance. </dd></dl>

</div>
</div>
<a id="ab4122d89326019006fa949811c7be172"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4122d89326019006fa949811c7be172">&#9670;&nbsp;</a></span>shared_resources() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classasylo_1_1SharedResourceManager.html">SharedResourceManager</a>* asylo::EnclaveManager::shared_resources </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetches the shared resource manager object. </p>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="classasylo_1_1SharedResourceManager.html" title="A manager object for shared resources. ">SharedResourceManager</a> instance. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>asylo/platform/core/<a class="el" href="enclave__manager_8h_source.html">enclave_manager.h</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/>
</body>
</html>
